{"ast":null,"code":"import { mergeMap } from 'rxjs/operators';\nimport { BehaviorSubject, combineLatest } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../service/create.service\";\nimport * as i3 from \"../../service/auth.service\";\nimport * as i4 from \"@angular/common\";\n\nconst _c0 = function (a1) {\n  return [\"/details/edit\", a1];\n};\n\nfunction DetailsComponent_button_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 15);\n    i0.ɵɵtext(1, \"Edit\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(1, _c0, ctx_r0.meetings == null ? null : ctx_r0.meetings._id));\n  }\n}\n\nfunction DetailsComponent_button_31_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function DetailsComponent_button_31_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.deleteHandler(ctx_r5.meetings == null ? null : ctx_r5.meetings._id));\n    });\n    i0.ɵɵtext(1, \"Delete\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DetailsComponent_button_32_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 17);\n    i0.ɵɵtext(1, \"You already joined!\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DetailsComponent_ng_template_33_button_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function DetailsComponent_ng_template_33_button_0_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r10.joinInMeeting(ctx_r10.meetings == null ? null : ctx_r10.meetings._id, ctx_r10.userId._id));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"async\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"Avalible \", i0.ɵɵpipeBind1(2, 1, ctx_r7.meetings == null ? null : ctx_r7.meetings.avaliblePeople), \" place\");\n  }\n}\n\nfunction DetailsComponent_ng_template_33_ng_template_1_button_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 17);\n    i0.ɵɵtext(1, \"No avalible place!\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DetailsComponent_ng_template_33_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, DetailsComponent_ng_template_33_ng_template_1_button_0_Template, 2, 0, \"button\", 20);\n  }\n\n  if (rf & 2) {\n    const ctx_r9 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r9.isUserOwner);\n  }\n}\n\nfunction DetailsComponent_ng_template_33_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, DetailsComponent_ng_template_33_button_0_Template, 3, 3, \"button\", 18);\n    i0.ɵɵtemplate(1, DetailsComponent_ng_template_33_ng_template_1_Template, 1, 1, \"ng-template\", null, 19, i0.ɵɵtemplateRefExtractor);\n  }\n\n  if (rf & 2) {\n    const _r8 = i0.ɵɵreference(2);\n\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.place && !ctx_r4.isUserOwner)(\"ngIfElse\", _r8);\n  }\n}\n\nexport class DetailsComponent {\n  //\n  constructor(router, createService, activatedRoute, authService) {\n    this.router = router;\n    this.createService = createService;\n    this.activatedRoute = activatedRoute;\n    this.authService = authService;\n    this.refreshThemeRequest$ = new BehaviorSubject(undefined);\n    this.canSubscribe = false;\n    this.isLoggedIn$ = this.authService.loggedIn$;\n    this.place = false;\n  }\n\n  ngOnInit() {\n    this.userId = this.authService.currentUser;\n    combineLatest([this.activatedRoute.params.pipe(mergeMap(params => {\n      // console.log(params)\n      const themeId = params['meetingId']; // console.log(themeId)\n\n      return this.refreshThemeRequest$.pipe(mergeMap(() => this.createService.loadMeetingById(themeId)));\n    })), this.authService.currentUser$]).subscribe(([meeting, user]) => {\n      this.meetings = meeting;\n      this.place = meeting.avaliblePeople > 0 == true;\n      this.alreadyJoined = user?.joinedMeeting.includes(meeting._id);\n      console.log(this.alreadyJoined);\n      this.currentUser = user;\n      this.isUserOwner = user && this.meetings?._ownerId == user._id;\n    }); // this.place = Number(this.meetings?.avaliblePeople)>0\n    // console.log(this.place)\n    // console.log(this.meetings)\n  }\n\n  deleteHandler(meetingsId) {\n    // console.log(meetingsId)\n    this.createService.delete(meetingsId).subscribe({\n      next: () => {\n        this.router.navigate(['/meeting']);\n      },\n      error: e => console.error(e)\n    });\n  }\n\n  joinInMeeting(meetingsId, userId) {\n    this.createService.join(meetingsId, userId).subscribe({\n      next: () => {// this.router.navigate(['/']);\n      },\n      error: e => console.error(e)\n    });\n  }\n\n}\n\nDetailsComponent.ɵfac = function DetailsComponent_Factory(t) {\n  return new (t || DetailsComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.CreateService), i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i3.AuthService));\n};\n\nDetailsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: DetailsComponent,\n  selectors: [[\"app-details\"]],\n  decls: 35,\n  vars: 9,\n  consts: [[1, \"container\"], [\"id\", \"ribbon\"], [1, \"grid\", \"product\"], [1, \"column-xs-12\", \"column-md-7\"], [1, \"product-gallery\"], [1, \"product-image\"], [1, \"active\", 3, \"src\"], [1, \"column-xs-12\", \"column-md-5\"], [\"id\", \"date\"], [1, \"description\"], [1, \"form-group\"], [\"class\", \"button\", 3, \"routerLink\", 4, \"ngIf\"], [\"href\", \"javascript:void(0);\", \"class\", \"button\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"button\", 4, \"ngIf\", \"ngIfElse\"], [\"meeting\", \"\"], [1, \"button\", 3, \"routerLink\"], [\"href\", \"javascript:void(0);\", 1, \"button\", 3, \"click\"], [1, \"button\"], [\"href\", \"javascript:void(0);\", \"class\", \"button\", 3, \"click\", 4, \"ngIf\", \"ngIfElse\"], [\"allMeeting\", \"\"], [\"class\", \"button\", 4, \"ngIf\"]],\n  template: function DetailsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"p\");\n      i0.ɵɵtext(3, \"Details of meeting\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(4, \"div\", 0)(5, \"div\", 2)(6, \"div\", 3)(7, \"div\", 4)(8, \"div\", 5);\n      i0.ɵɵelement(9, \"img\", 6);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(10, \"div\", 7)(11, \"div\", 8)(12, \"p\", 8);\n      i0.ɵɵtext(13, \"Place:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"h4\");\n      i0.ɵɵtext(15);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(16, \"div\", 8)(17, \"p\", 8);\n      i0.ɵɵtext(18, \"Date:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(19, \"h4\");\n      i0.ɵɵtext(20);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(21, \"div\", 8)(22, \"p\", 8);\n      i0.ɵɵtext(23, \"Time:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(24, \"h4\");\n      i0.ɵɵtext(25);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(26, \"div\", 9)(27, \"p\");\n      i0.ɵɵtext(28);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(29, \"div\", 10);\n      i0.ɵɵtemplate(30, DetailsComponent_button_30_Template, 2, 3, \"button\", 11);\n      i0.ɵɵtemplate(31, DetailsComponent_button_31_Template, 2, 0, \"button\", 12);\n      i0.ɵɵtemplate(32, DetailsComponent_button_32_Template, 2, 0, \"button\", 13);\n      i0.ɵɵtemplate(33, DetailsComponent_ng_template_33_Template, 3, 2, \"ng-template\", null, 14, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵelementEnd()()()()();\n    }\n\n    if (rf & 2) {\n      const _r3 = i0.ɵɵreference(34);\n\n      i0.ɵɵadvance(9);\n      i0.ɵɵpropertyInterpolate(\"src\", ctx.meetings == null ? null : ctx.meetings.imageUrl, i0.ɵɵsanitizeUrl);\n      i0.ɵɵadvance(6);\n      i0.ɵɵtextInterpolate1(\" \", ctx.meetings == null ? null : ctx.meetings.place, \"\");\n      i0.ɵɵadvance(5);\n      i0.ɵɵtextInterpolate1(\" \", ctx.meetings == null ? null : ctx.meetings.date, \"\");\n      i0.ɵɵadvance(5);\n      i0.ɵɵtextInterpolate1(\" \", ctx.meetings == null ? null : ctx.meetings.time, \"\");\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate(ctx.meetings == null ? null : ctx.meetings.description);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.isUserOwner);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.isUserOwner);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.isUserOwner && ctx.alreadyJoined)(\"ngIfElse\", _r3);\n    }\n  },\n  dependencies: [i4.NgIf, i1.RouterLink, i4.AsyncPipe],\n  styles: [\"@import url('https://fonts.googleapis.com/css?family=Pontano+Sans');\\n#ribbon[_ngcontent-%COMP%] {\\n\\n  background: #7C74A3;\\n  background: linear-gradient(to right, #7C74A3 0%, #D4C1E8 100%);\\n  -webkit-background-clip: text;\\n          background-clip: text;\\n  -webkit-text-fill-color: transparent;\\n  font-size: 35px;\\n  text-align: center;\\n  padding-top: 35px;\\n  padding-bottom: 35px;\\n}\\nbody[_ngcontent-%COMP%] {\\n  box-sizing: border-box;\\n\\n  font-family: 'Pontano Sans', sans-serif;\\n  font-size: 1.125rem;\\n  line-height: 1.5;\\n  margin: 0;\\n  padding: 0;\\n  color: #888;\\n  background: #fff;\\n  text-rendering: optimizeLegibility;\\n}\\n\\nh1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%] {\\n  color: #333;\\n  font-weight: normal;\\n  margin: 1.75rem 0 1rem 0;\\n}\\n#date[_ngcontent-%COMP%]{\\nfont-size:20px;\\nmargin-bottom: 11px;\\n\\n}\\np[_ngcontent-%COMP%]{\\n  font-size: 20px;\\n  \\n}\\nh4[_ngcontent-%COMP%], p[_ngcontent-%COMP%] {\\n  display: inline;\\n}\\nh1[_ngcontent-%COMP%] {\\n  font-size: 2.5rem;\\n}\\nh2[_ngcontent-%COMP%] {\\n  font-size: 2.125rem;\\n  margin: 0;\\n}\\nh3[_ngcontent-%COMP%] {\\n  font-size: 2rem;\\n}\\nh4[_ngcontent-%COMP%] {\\n  font-size: 1.5rem;\\n  margin: 1rem 0 0.5rem 0;\\n  font-weight: bold;\\n\\n}\\nimg[_ngcontent-%COMP%] {\\n  width: 350px;\\n  height: 300px;\\n  max-width: 100%;\\n  \\n  object-fit: cover;\\n}\\n.description[_ngcontent-%COMP%] {\\n  padding:50px 150px;\\n  margin-left: 100px;\\nmargin-bottom: 100px;\\n  width: 550px;\\n  border-top: 0.0625rem solid #e3dddd;\\n  margin: 2rem 0rem;\\n  padding: 1rem 0 0 0;\\n}\\n.add-to-cart[_ngcontent-%COMP%] {\\n  position: relative;\\n  display: inline-block;\\n  background: #3e3e3f;\\n  color: #fff;\\n  border: none;\\n  border-radius: 0;\\n  padding: 1.25rem 2.5rem;\\n  font-size: 1rem;\\n  text-transform: uppercase;\\n  cursor: pointer;\\n  transform: translateZ(0);\\n  transition: color 0.3s ease;\\n  letter-spacing: 0.0625rem;\\n}\\n.container[_ngcontent-%COMP%] {\\n  margin: auto;\\n  padding: 0 1rem;\\n  max-width: 75rem;\\n  width: 100%;\\n}\\n.product-image[_ngcontent-%COMP%]{\\n  display: block;\\n  margin: 0 0 0.75rem 0;\\n  float: right\\n\\n}\\n.button[_ngcontent-%COMP%]{\\n  \\n  padding:15px 50px;\\n  font-size:17px;\\n  font-weight:bold;\\n  background-color:#b1b1cc;\\n  border:none;\\n  color:black;\\n  margin-top:20px;\\n  margin: 30px;\\n }\\n.grid[_ngcontent-%COMP%]{\\n  \\n  \\n  \\n  margin-left: 150px;\\n\\n }\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRldGFpbHMuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxtRUFBbUU7QUFDbkU7O0VBRUUsbUJBQW1CO0VBQ25CLCtEQUErRDtFQUMvRCw2QkFBcUI7VUFBckIscUJBQXFCO0VBQ3JCLG9DQUFvQztFQUNwQyxlQUFlO0VBQ2Ysa0JBQWtCO0VBQ2xCLGlCQUFpQjtFQUNqQixvQkFBb0I7QUFDdEI7QUFFQTtFQUNFLHNCQUFzQjs7RUFFdEIsdUNBQXVDO0VBQ3ZDLG1CQUFtQjtFQUNuQixnQkFBZ0I7RUFDaEIsU0FBUztFQUNULFVBQVU7RUFDVixXQUFXO0VBQ1gsZ0JBQWdCO0VBQ2hCLGtDQUFrQztBQUNwQztBQUNBOzs7Ozs7R0FNRztBQUVIOzs7O0VBSUUsV0FBVztFQUNYLG1CQUFtQjtFQUNuQix3QkFBd0I7QUFDMUI7QUFDQTtBQUNBLGNBQWM7QUFDZCxtQkFBbUI7O0FBRW5CO0FBQ0E7RUFDRSxlQUFlO0VBQ2YsdUJBQXVCO0FBQ3pCO0FBQ0E7RUFDRSxlQUFlO0FBQ2pCO0FBQ0E7RUFDRSxpQkFBaUI7QUFDbkI7QUFFQTtFQUNFLG1CQUFtQjtFQUNuQixTQUFTO0FBQ1g7QUFFQTtFQUNFLGVBQWU7QUFDakI7QUFFQTtFQUNFLGlCQUFpQjtFQUNqQix1QkFBdUI7RUFDdkIsaUJBQWlCOztBQUVuQjtBQUVBO0VBQ0UsWUFBWTtFQUNaLGFBQWE7RUFDYixlQUFlO0VBQ2Ysa0JBQWtCO0VBQ2xCLGlCQUFpQjtBQUNuQjtBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLGtCQUFrQjtBQUNwQixvQkFBb0I7RUFDbEIsWUFBWTtFQUNaLG1DQUFtQztFQUNuQyxpQkFBaUI7RUFDakIsbUJBQW1CO0FBQ3JCO0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIscUJBQXFCO0VBQ3JCLG1CQUFtQjtFQUNuQixXQUFXO0VBQ1gsWUFBWTtFQUNaLGdCQUFnQjtFQUNoQix1QkFBdUI7RUFDdkIsZUFBZTtFQUNmLHlCQUF5QjtFQUN6QixlQUFlO0VBQ2Ysd0JBQXdCO0VBQ3hCLDJCQUEyQjtFQUMzQix5QkFBeUI7QUFDM0I7QUFFQTtFQUNFLFlBQVk7RUFDWixlQUFlO0VBQ2YsZ0JBQWdCO0VBQ2hCLFdBQVc7QUFDYjtBQUNBO0VBQ0UsY0FBYztFQUNkLHFCQUFxQjtFQUNyQjs7QUFFRjtBQUNBO0VBQ0Usd0JBQXdCO0VBQ3hCLGlCQUFpQjtFQUNqQixjQUFjO0VBQ2QsZ0JBQWdCO0VBQ2hCLHdCQUF3QjtFQUN4QixXQUFXO0VBQ1gsV0FBVztFQUNYLGVBQWU7RUFDZixZQUFZO0NBQ2I7QUFDQTtFQUNDLHVCQUF1QjtFQUN2QixvQkFBb0I7RUFDcEIsc0JBQXNCO0VBQ3RCLGtCQUFrQjs7Q0FFbkIiLCJmaWxlIjoiZGV0YWlscy5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiQGltcG9ydCB1cmwoJ2h0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzP2ZhbWlseT1Qb250YW5vK1NhbnMnKTtcbiNyaWJib24ge1xuXG4gIGJhY2tncm91bmQ6ICM3Qzc0QTM7XG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh0byByaWdodCwgIzdDNzRBMyAwJSwgI0Q0QzFFOCAxMDAlKTtcbiAgYmFja2dyb3VuZC1jbGlwOiB0ZXh0O1xuICAtd2Via2l0LXRleHQtZmlsbC1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gIGZvbnQtc2l6ZTogMzVweDtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBwYWRkaW5nLXRvcDogMzVweDtcbiAgcGFkZGluZy1ib3R0b206IDM1cHg7XG59XG5cbmJvZHkge1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuXG4gIGZvbnQtZmFtaWx5OiAnUG9udGFubyBTYW5zJywgc2Fucy1zZXJpZjtcbiAgZm9udC1zaXplOiAxLjEyNXJlbTtcbiAgbGluZS1oZWlnaHQ6IDEuNTtcbiAgbWFyZ2luOiAwO1xuICBwYWRkaW5nOiAwO1xuICBjb2xvcjogIzg4ODtcbiAgYmFja2dyb3VuZDogI2ZmZjtcbiAgdGV4dC1yZW5kZXJpbmc6IG9wdGltaXplTGVnaWJpbGl0eTtcbn1cbi8qIFxudWwge1xuICBwYWRkaW5nOiAwO1xuICBtYXJnaW46IDA7XG4gIGxpc3Qtc3R5bGU6IG5vbmU7XG5cbn0gKi9cblxuaDEsXG5oMixcbmgzLFxuaDQge1xuICBjb2xvcjogIzMzMztcbiAgZm9udC13ZWlnaHQ6IG5vcm1hbDtcbiAgbWFyZ2luOiAxLjc1cmVtIDAgMXJlbSAwO1xufVxuI2RhdGV7XG5mb250LXNpemU6MjBweDtcbm1hcmdpbi1ib3R0b206IDExcHg7XG5cbn1cbnB7XG4gIGZvbnQtc2l6ZTogMjBweDtcbiAgLyogZm9udC13ZWlnaHQ6IGJvbGQ7ICovXG59XG5oNCwgcCB7XG4gIGRpc3BsYXk6IGlubGluZTtcbn1cbmgxIHtcbiAgZm9udC1zaXplOiAyLjVyZW07XG59XG5cbmgyIHtcbiAgZm9udC1zaXplOiAyLjEyNXJlbTtcbiAgbWFyZ2luOiAwO1xufVxuXG5oMyB7XG4gIGZvbnQtc2l6ZTogMnJlbTtcbn1cblxuaDQge1xuICBmb250LXNpemU6IDEuNXJlbTtcbiAgbWFyZ2luOiAxcmVtIDAgMC41cmVtIDA7XG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xuXG59XG5cbmltZyB7XG4gIHdpZHRoOiAzNTBweDtcbiAgaGVpZ2h0OiAzMDBweDtcbiAgbWF4LXdpZHRoOiAxMDAlO1xuICAvKiBoZWlnaHQ6IGF1dG87ICovXG4gIG9iamVjdC1maXQ6IGNvdmVyO1xufVxuXG4uZGVzY3JpcHRpb24ge1xuICBwYWRkaW5nOjUwcHggMTUwcHg7XG4gIG1hcmdpbi1sZWZ0OiAxMDBweDtcbm1hcmdpbi1ib3R0b206IDEwMHB4O1xuICB3aWR0aDogNTUwcHg7XG4gIGJvcmRlci10b3A6IDAuMDYyNXJlbSBzb2xpZCAjZTNkZGRkO1xuICBtYXJnaW46IDJyZW0gMHJlbTtcbiAgcGFkZGluZzogMXJlbSAwIDAgMDtcbn1cblxuLmFkZC10by1jYXJ0IHtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gIGJhY2tncm91bmQ6ICMzZTNlM2Y7XG4gIGNvbG9yOiAjZmZmO1xuICBib3JkZXI6IG5vbmU7XG4gIGJvcmRlci1yYWRpdXM6IDA7XG4gIHBhZGRpbmc6IDEuMjVyZW0gMi41cmVtO1xuICBmb250LXNpemU6IDFyZW07XG4gIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgdHJhbnNmb3JtOiB0cmFuc2xhdGVaKDApO1xuICB0cmFuc2l0aW9uOiBjb2xvciAwLjNzIGVhc2U7XG4gIGxldHRlci1zcGFjaW5nOiAwLjA2MjVyZW07XG59XG5cbi5jb250YWluZXIge1xuICBtYXJnaW46IGF1dG87XG4gIHBhZGRpbmc6IDAgMXJlbTtcbiAgbWF4LXdpZHRoOiA3NXJlbTtcbiAgd2lkdGg6IDEwMCU7XG59XG4ucHJvZHVjdC1pbWFnZXtcbiAgZGlzcGxheTogYmxvY2s7XG4gIG1hcmdpbjogMCAwIDAuNzVyZW0gMDtcbiAgZmxvYXQ6IHJpZ2h0XG5cbn1cbi5idXR0b257XG4gIC8qIGJvcmRlci1yYWRpdXM6NzBweDsgKi9cbiAgcGFkZGluZzoxNXB4IDUwcHg7XG4gIGZvbnQtc2l6ZToxN3B4O1xuICBmb250LXdlaWdodDpib2xkO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiNiMWIxY2M7XG4gIGJvcmRlcjpub25lO1xuICBjb2xvcjpibGFjaztcbiAgbWFyZ2luLXRvcDoyMHB4O1xuICBtYXJnaW46IDMwcHg7XG4gfVxuIC5ncmlke1xuICAvKiBwYWRkaW5nOjE1cHggNTBweDsgKi9cbiAgLyogZm9udC1zaXplOjE4cHg7ICovXG4gIC8qIGZvbnQtd2VpZ2h0OmJvbGQ7ICovXG4gIG1hcmdpbi1sZWZ0OiAxNTBweDtcblxuIH0iXX0= */\"]\n});","map":{"version":3,"mappings":"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","names":["mergeMap","BehaviorSubject","combineLatest","i0","_r8","DetailsComponent","constructor","router","createService","activatedRoute","authService","undefined","loggedIn$","ngOnInit","userId","currentUser","params","pipe","themeId","refreshThemeRequest$","loadMeetingById","currentUser$","subscribe","meeting","user","meetings","place","avaliblePeople","alreadyJoined","joinedMeeting","includes","_id","console","log","isUserOwner","_ownerId","deleteHandler","meetingsId","delete","next","navigate","error","e","joinInMeeting","join","selectors","decls","vars","consts","template","_r3"],"sourceRoot":"","sources":["/Users/emineshaban/Documents/GitHub/Project/src/app/meetings/details/details.component.ts","/Users/emineshaban/Documents/GitHub/Project/src/app/meetings/details/details.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { CreateService } from '../../service/create.service';\nimport { map, mergeMap, tap } from 'rxjs/operators';\nimport { BehaviorSubject, combineLatest, Observable } from 'rxjs';\nimport { IUser } from '../../interfaces/user'\nimport { IMeeting } from '../../interfaces/meeting'\nimport { AuthService } from '../../service/auth.service';\n\n@Component({\n  selector: 'app-details',\n  templateUrl: './details.component.html',\n  styleUrls: ['./details.component.css']\n})\nexport class DetailsComponent implements OnInit {\n  meetings: IMeeting | null | undefined\n  refreshThemeRequest$ = new BehaviorSubject(undefined);\n\n  // canSubscribe: boolean = false;\n  // currentUser?: IUser;\n  // isUserOwner: boolean = false;\n  //\n  meetingsId: string| undefined;\n  canSubscribe: boolean = false;\n  currentUser?: IUser | undefined | null;\n  isUserOwner: boolean | undefined | null;\n  isLoggedIn$: Observable<boolean> = this.authService.loggedIn$;\n  themeId: string | undefined\n  userId: any;\nplace: boolean = false;\n  alreadyJoined: boolean | undefined;\n  //\n  constructor( private router: Router, private createService: CreateService, private activatedRoute: ActivatedRoute, private authService: AuthService) { }\n  ngOnInit(): void {\n\n    this.userId = this.authService.currentUser;\n\n    combineLatest([\n      this.activatedRoute.params.pipe(\n        mergeMap(params => {\n          // console.log(params)\n          const themeId = params['meetingId'];\n          // console.log(themeId)\n\n          return this.refreshThemeRequest$.pipe(mergeMap(() => this.createService.loadMeetingById(themeId)))\n        })\n      ),\n      this.authService.currentUser$\n\n    ])\n      .subscribe(([meeting, user]) => {\n        this.meetings = meeting\n        this.place = meeting.avaliblePeople > 0 == true\n        this.alreadyJoined = user?.joinedMeeting.includes(meeting._id)\n        console.log(this.alreadyJoined)\n\n        this.currentUser = user\n        this.isUserOwner = user && this.meetings?._ownerId == user._id;\n\n      }\n      )\n      // this.place = Number(this.meetings?.avaliblePeople)>0\n      // console.log(this.place)\n      // console.log(this.meetings)\n      \n  }\n\n  deleteHandler(meetingsId: any) {\n    // console.log(meetingsId)\n    this.createService.delete(meetingsId).subscribe({\n      next: () => {\n\n        this.router.navigate(['/meeting']);\n      },\n      error: (e) => console.error(e)\n    });\n\n  }\n  joinInMeeting(meetingsId: any, userId: any){\n    this.createService.join(meetingsId, userId).subscribe({\n      next: () => {\n\n        // this.router.navigate(['/']);\n      },\n      error: (e) => console.error(e)\n    });\n  }\n\n\n}\n\n\n\n\n","<div class=\"container\">\n\n    <div id=\"ribbon\">\n        <p>Details of meeting</p>\n    </div>\n    <div class=\"container\">\n        <div class=\"grid product\">\n            <div class=\"column-xs-12 column-md-7\">\n                <div class=\"product-gallery\">\n                    <div class=\"product-image\">\n                        <img class=\"active\" src=\"{{meetings?.imageUrl}}\">\n                        <!-- <h2>$19.99</h2> -->\n                    </div>\n                </div>\n            </div>\n            <div class=\"column-xs-12 column-md-5\">\n                <div id=\"date\">\n                    <p id=\"date\">Place:</p>\n                    <h4> {{meetings?.place}}</h4>\n                </div>\n\n                <div id=\"date\">\n                    <p id=\"date\">Date:</p>\n                    <h4> {{meetings?.date}}</h4>\n                </div>\n\n                <div id=\"date\">\n                    <p id=\"date\">Time:</p>\n                    <h4> {{meetings?.time}}</h4>\n                </div>\n\n                <div class=\"description\">\n                    <p>{{meetings?.description}}</p>\n                </div>\n                <div class=\"form-group\">\n                    <button *ngIf=\"isUserOwner\" [routerLink]=\"['/details/edit', meetings?._id]\"\n                        class=\"button\">Edit</button>\n                    <button *ngIf=\"isUserOwner\" href=\"javascript:void(0);\" (click)=\"deleteHandler(meetings?._id)\"\n                        class=\"button\">Delete</button>\n\n                        <button *ngIf=\"!isUserOwner && alreadyJoined; else meeting\" class=\"button\">You already joined!</button>\n                        <ng-template #meeting>\n\n                    <button *ngIf=\"place && !isUserOwner; else allMeeting\" href=\"javascript:void(0);\"\n                        (click)=\"joinInMeeting(meetings?._id, userId._id)\" class=\"button\">Avalible\n                        {{meetings?.avaliblePeople | async}} place</button>\n                    <ng-template #allMeeting>\n                        <button *ngIf=\"!isUserOwner\" class=\"button\">No avalible place!</button>\n                    </ng-template>\n                </ng-template>\n\n\n                </div>\n            </div>\n        </div>\n    </div>"]},"metadata":{},"sourceType":"module"}